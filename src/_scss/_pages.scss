.profile {
  article > figure {
    clip-path: url(#blobby);
    @media (min-width: 29rem) {
      inline-size: 20rem;
    }
    img {
      aspect-ratio: 1/1;
      width: 100%;
    }
  }
}

.profile .gallery__item,
.projects .grid__item {
  &:focus,
  &:hover {
    h2 {
      color: var(--color__highlight);
    }
  }
  &:focus-visible {
    box-shadow: 0 0 0 var(--size__xs) var(--color__highlight--semi);
  }
  img {
    .loaded & {
      transition: transform 0.375s ease-in;
    }
  }
  figcaption {
    h2,
    h3 {
      .loaded & {
        transition: color 0.375s ease-in;
      }
    }
  }
}

.profile .gallery__item,
.projects .featured {
  overflow: hidden;
  &:focus-visible,
  &:hover {
    img {
      transform: scale(1.0125);
    }
  }
  [data-theme="dark"] & {
    picture:first-child {
      display: none;
    }
    picture:nth-of-type(2) {
      display: block !important;
    }
  }
  img {
    aspect-ratio: 320 / 200;
  }
  figcaption {
    order: -1;
    position: relative;
  }
}

.profile .gallery__item {
  figcaption {
    [data-theme="dark"] & {
      background-color: var(--color__contrast--extra);
    }
  }
}

.projects .featured figure {
  overflow: hidden;
  @media(min-width: 29rem) {
    grid-template-columns: 1fr 1fr;
  }
  img {
    border-top-right-radius: var(--size__m);
    @media(min-width: 1rem) and (max-width: 29rem) {
      img {
        border-bottom-left-radius: var(--size__m);
      }
    }
  }
}

.projects .side {
  .loaded & {
    transition: background-color 0.375s ease-in;
  }
  figure {
    @media (min-width: 29rem) {
      grid-template-columns: auto 1fr;
    }
    @media (min-width: 79rem) {
      grid-gap: var(--size__l);
    }
  }
  &:focus-visible,
  &:hover {
    background-color: var(--color__highlight--ghost);
  }
  &:hover {
    img {
      transform: perspective(7.5rem) rotateY(-3deg) rotateX(1.5deg);
    }
  }
}

.projects {
  .grid {
    --columnWidth: 100%;
    grid-column: 1/-1;
    padding-left: var(--size__m);
    padding-right: var(--size__m);
    padding-top: 0;
    @media (min-width: 29rem) {
      --columnWidth: var(--width__s);
    }
    @media (min-width: 79rem) {
      --columnWidth: var(--width__m);
    }
    &__item {
      &.featured {
        grid-column: 1/-1;
      }
    }
  }
}

.detail {
  .grid {
    background-color: var(--color__highlight--ghost);
    border-radius: var(--size__m);
    grid-column: 1/-1;
    justify-items: center;
    @media (min-width: 29rem) {
      --columnWidth: var(--width__s);
    }
    @media (min-width: 79rem) {
      --columnWidth: var(--width__m);
    }
    &__item {
      max-width: 40rem;
      [data-theme="dark"] & {
        img:first-child {
          display: none;
        }
        img:nth-of-type(2) {
          display: block !important;
        }
      }
    }
  }
}

.error > figure + * {
  margin-top: var(--size__xxxl);
}

.cv {
  #recommendations {
    grid-column: 1/-1;
    .grid {
      padding-bottom: 0;
      padding-top: 0;
      max-width: var(--width__xxl);
    }
    blockquote {
      &:first-child {
        grid-row: span 2;
      }
      > section > p {
        &:first-child:before,
        &:last-child:after {
          color: var(--color__highlight--semi);
          font-size: var(--type__size--xl);
          font-weight: 600;
          line-height: var(--type__lineheight--m);
        }
        &:first-child:before {
          content: "”";
          margin-left: calc(var(--size__s) * -1);
        }
        &:last-child:after {
          content: "”";
        }
      }
    }
  }
}

.hire {
  #process {
    grid-column: 1/-1;
    grid-template-columns: inherit;
  }
}

.clients {
  .grid {
    grid-column: 1/-1;
  }
  .grid__item {
    transition: transform 0.375s ease-in;
    &:hover {
      transform: scale(1.0125);
    }
    &:focus-visible {
      box-shadow: 0 0 0 var(--size__xs) var(--color__highlight--semi);
    }
  }
}

.agreement,
.invoice {
  blockquote {
    margin-left: calc(var(--size__l) * -1);
    padding-left: var(--size__l);
  }
}

.agreement {
  #signatures {
    > * + * {
      margin-top: var(--size__s);
    }
    svg {
      margin-left: calc(var(--type__size--m) * -1);
    }
    p:nth-child(3),
    p:last-child {
      border-top: var(--size__xxs) solid var(--color__base--mid);
    }
    p:nth-child(3) {
      margin-top: calc(var(--size__m) * -1);
    }
    p:last-child {
      margin-top: var(--size__xxl);
    }
  }
}

.invoice {
  h2 + p {
    font-size: var(--type__size--xl);
    line-height: clamp(2rem, var(--type__size--target), 2.5rem);
    margin-top: var(--size__m) !important;
  }
}
